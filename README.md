# ğŸš€ FastAPI Python API Template

## ğŸ“œ Description

A reusable, Dockerized FastAPI template for building Python-based APIs with environment-based configuration and optional AWS/Neo4j integration.

---

## Table of Contents

1. [ğŸ“– Overview](#-overview)
2. [ğŸ§‘â€ğŸ’» Usage](#-usage)
3. [ğŸ› ï¸ Configuration](#-configuration)
   - [ğŸ“ 1. Clone the Project](#-1-clone-the-project)
   - [âš™ï¸ 2. Create the .env File](#-2-create-the-env-file)
   - [ğŸ” 3. Retrieve Secrets from 1Password](#-3-retrieve-secrets-from-1password)
   - [ğŸ§© 4. Environment Variables Overview](#-4-environment-variables-overview)
   - [ğŸ“ Example .env](#-example-env)
   - [ğŸ“¦ Note](#-note)
4. [ğŸ“¦ Docker Deployment](#-docker-deployment)
5. [ğŸ§ª Local Development](#-local-development)
   - [ğŸ”¹ With Poetry (recommended)](#-with-poetry-recommended)
   - [ğŸ”¹ Without Poetry (classic pip)](#-without-poetry-classic-pip)
6. [ğŸ” API Testing](#-api-testing)
7. [ğŸ”§ Project Structure](#-project-structure)
8. [ğŸš€ Summary](#-summary)


---

## ğŸ“– Overview

This project is a lightweight API starter built using:
- **FastAPI** for high-performance async APIs
- **Docker & Docker Compose** for containerization
- **`.env` config loading** using `pydantic-settings`
- Optional **Neo4j**, **AWS Cognito**, or other services

---

## ğŸ§‘â€ğŸ’» Usage

To run the application locally with Docker Compose:

[ğŸ“¦ Docker Deployment](#-docker-deployment)

Or without Docker:

[ğŸ§ª Local Development](#-local-development)

---

## ğŸ› ï¸ Configuration

Follow these steps to configure your local environment:

---

### ğŸ“ 1. Clone the Project

```bash
cd path/to/appropriate/dir # Choose a dir where you want to save all your apis or python code repos
git clone https://gitlab.com/pmichiels/python-api-template
cd python-api-template
```

---

### âš™ï¸ 2. Create the `.env` File

Copy the example environment template and edit your personal values:

```bash
cp .env.template .env
```

---

### ğŸ” 3. Retrieve Secrets from 1Password

All required secrets are stored securely in 1Password.

- Vault: **Fontanherzen**
- Search for entries like:
  - `NEO4J_URL`
  - `DB_USER`
  - `DB_PASSWORD`
  - (Optional) `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, etc.

---

### ğŸ§© 4. Environment Variables Overview

These variables are automatically loaded using `pydantic-settings`:

- `PORT`: Port number the API runs on (e.g. `8000`)
- `NEO4J_URL`: Neo4j connection URL
- `DB_USER`: Neo4j database user
- `DB_PASSWORD`: Neo4j password
- (Optional) `AWS_` variables or others based on use case

---

### ğŸ“ Example `.env`

```dotenv
PORT=8000
NEO4J_URL=bolt://localhost:7687
DB_USER=neo4j
DB_PASSWORD=your-secure-password
```

---

### ğŸ“¦ Note

The `.env` file is **local only** and should **never be committed** to version control.  
Make sure it is included in `.gitignore`.
---

## ğŸ“¦ Docker Deployment

Build and run the containerized API with Docker Compose:

```bash
docker-compose up --build
```

The app is mounted via volume and will auto-reload on changes.

---



## ğŸ§ª Local Development

There are two ways to develop locally without docker:

### ğŸ”¹ With Poetry (recommended)

1. Install Poetry:
   ```bash
   curl -sSL https://install.python-poetry.org | python3 -
   ```

2. Install dependencies:
   ```bash
   poetry install
   ```

3. Enter Poetry environment:
   ```bash
   poetry shell
   ```

4. Run the server:
   ```bash
   poetry run uvicorn main:app --reload --host 0.0.0.0 --port 8000
   ```

### ğŸ”¹ Without Poetry (classic pip)

1. Create and activate a virtual environment:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   ```

2. Install dependencies from requirements.txt:
   ```bash
   pip install -r requirements.txt
   ```

3. Run the server:
   ```bash
   uvicorn main:app --reload --host 0.0.0.0 --port 8000
   ```

---

## ğŸ” API Testing

Once your server is up and running (via Docker or Uvicorn), open your browser and visit:

```bash
http://localhost:8080/docs
```
This will load the Swagger UI auto-generated by FastAPI, where you can test and explore all your endpoints interactively.

You can also view the OpenAPI spec directly:

```bash
http://localhost:8080/openapi.json
```


---

## ğŸ”§ Project Structure

```bash
.
â”œâ”€â”€ main.py
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test.py
â”‚   â””â”€â”€ settings.py
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ Neo4jHandler.py
â”œâ”€â”€ .env.template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ poetry.lock
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

---

## ğŸš€ Summary

âœ… **Ready-to-use FastAPI Docker Template**

âœ… **Environment-based config support**

âœ… **Dockerized and local run options**

âœ… **Supports AWS/Neo4j if needed**

âœ… **Flexible enough for microservice APIs**